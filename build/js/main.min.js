document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("section-selection");function t(e){const t=document.getElementById("news"),n=document.createElement("h2");t.innerHTML=" ",n.innerText=e,t.append(n)}function n(e,t){return{title:t[e].title,abstract:t[e].abstract,byLine:t[e].byline,url:t[e].url,photoSuperSize:t[e].multimedia[0].url,captionSuperSize:t[e].multimedia[0].caption}}function i(e,t,n,i){e.setAttribute("src",t),e.setAttribute("alt",n),e.setAttribute("class",i)}e.addEventListener("change",(function(){let s=[];$.ajax({method:"GET",url:`https://api.nytimes.com/svc/topstories/v2/${e.value}.json?api-key=5Fuweavf9NF1wpoTCAyGX4XZ7DMCtztz`}).done((function(e){!function(){const e=$(".logo"),t=$("header");e.addClass("shrunkLogo"),t.addClass("shrunkHeader")}(),s=function(e){const t=[],i=e.results.filter(e=>e.multimedia&&e.multimedia.length&&e.multimedia[0].url&&e.multimedia[0].caption);for(let e=0;e<12&&e<i.length;e++)t[e]=n(e,i);return t}(e),s.length>0?(function(e){const t=document.getElementById("news");t.innerHTML=" ",e.forEach(e=>{const n=document.createElement("div"),s=document.createElement("a"),l=document.createElement("img"),a=document.createElement("img");i(l,e.photoSuperSize,e.captionSuperSize,"image invisible"),i(a,"./build/images/ajax-loader.gif","loader gif ","loader"),n.setAttribute("class","description"),function(e,t){const n=document.createElement("p"),i=document.createElement("h3"),s=document.createElement("p");n.setAttribute("class","byline invisible"),i.setAttribute("class","title invisible"),s.setAttribute("class","abstract hidden invisible"),n.innerText=t.byLine,i.innerText=t.title,s.innerText=t.abstract,e.appendChild(i),e.appendChild(n),e.appendChild(s)}(n,e),function(e,t,n,i,s){e.setAttribute("href",s.url),e.setAttribute("class","article"),e.appendChild(n),e.appendChild(i),e.appendChild(t)}(s,n,l,a,e),t.appendChild(s)})}(s),function(){const e=document.getElementsByClassName("image"),t=document.getElementsByClassName("loader"),n=document.getElementsByClassName("title"),i=document.getElementsByClassName("byline"),s=document.getElementsByClassName("abstract");for(let l=0;l<e.length;l++)e[l].addEventListener("load",(function(){e[l].classList.toggle("invisible"),t[l].classList.toggle("invisible"),n[l].classList.toggle("invisible"),i[l].classList.toggle("invisible"),s[l].classList.toggle("invisible")}))}()):t("No article to dispay. Please select another topic.")})).fail((function(){t("Sorry something went wrong")}))}))}));