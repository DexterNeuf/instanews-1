document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("section-selection");document.getElementsByClassName("description");function t(e,t){return{title:t[e].title,abstract:t[e].abstract,byLine:t[e].byline,url:t[e].url,photoSuperSize:t[e].multimedia[0].url,captionSuperSize:t[e].multimedia[0].caption}}e.addEventListener("change",(function(){let n=[];$.ajax({method:"GET",url:`https://api.nytimes.com/svc/topstories/v2/${e.value}.json?api-key=5Fuweavf9NF1wpoTCAyGX4XZ7DMCtztz`}).done((function(e){!function(){const e=$(".logo"),t=$("header");e.addClass("shrunkLogo"),t.addClass("shrunkHeader")}(),n=function(e){const n=[],i=e.results.filter(e=>e.multimedia&&e.multimedia.length&&e.multimedia[0].url&&e.multimedia[0].caption);for(let e=0;e<12&&e<i.length;e++)n[e]=t(e,i);return n}(e),function(e){const t=document.getElementById("news");t.innerHTML=" ",e.forEach(e=>{const n=document.createElement("div"),i=document.createElement("a"),c=document.createElement("img");!function(e,t){e.setAttribute("src",t.photoSuperSize),e.setAttribute("alt",t.captionSuperSize)}(c,e),n.setAttribute("class","description"),function(e,t){const n=document.createElement("p"),i=document.createElement("h3"),c=document.createElement("p");n.setAttribute("class","byline"),i.setAttribute("class","title"),c.setAttribute("class","abstract hidden"),n.innerText=t.byLine,i.innerText=t.title,c.innerText=t.abstract,e.appendChild(i),e.appendChild(n),e.appendChild(c)}(n,e),function(e,t,n,i){e.setAttribute("href",i.url),e.setAttribute("class","article"),e.appendChild(n),e.appendChild(t)}(i,n,c,e),t.appendChild(i)})}(n)})).fail((function(){!function(e){const t=document.getElementById("news"),n=document.createElement("h2");n.innerText=e,t.append(n)}("Sorry something went wrong")}))}))}));