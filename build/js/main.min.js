document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("section-selection");document.getElementsByClassName("description");function t(e){const t=document.getElementById("news"),n=document.createElement("h2");t.innerHTML=" ",n.innerText=e,t.append(n)}function n(e,t){return{title:t[e].title,abstract:t[e].abstract,byLine:t[e].byline,url:t[e].url,photoSuperSize:t[e].multimedia[0].url,captionSuperSize:t[e].multimedia[0].caption}}function i(e,t,n,i){e.setAttribute("src",t),e.setAttribute("alt",n),e.setAttribute("class",i)}e.addEventListener("change",(function(){let a=[];$.ajax({method:"GET",url:`https://api.nytimes.com/svc/topstories/v2/${e.value}.json?api-key=5Fuweavf9NF1wpoTCAyGX4XZ7DMCtztz`}).done((function(e){!function(){const e=$(".logo"),t=$("header");e.addClass("shrunkLogo"),t.addClass("shrunkHeader")}(),a=function(e){const t=[],i=e.results.filter(e=>e.multimedia&&e.multimedia.length&&e.multimedia[0].url&&e.multimedia[0].caption);for(let e=0;e<12&&e<i.length;e++)t[e]=n(e,i);return t}(e),a.length>0?(function(e){const t=document.getElementById("news");t.innerHTML=" ",e.forEach(e=>{const n=document.createElement("div"),a=document.createElement("a"),s=document.createElement("img"),o=document.createElement("img");i(s,e.photoSuperSize,e.captionSuperSize,"image animated"),i(o,"../../assets/images/ajax-loader.gif","loader gif ","loader"),n.setAttribute("class","description"),function(e,t){const n=document.createElement("p"),i=document.createElement("h3"),a=document.createElement("p");n.setAttribute("class","byline"),i.setAttribute("class","title"),a.setAttribute("class","abstract hidden"),n.innerText=t.byLine,i.innerText=t.title,a.innerText=t.abstract,e.appendChild(i),e.appendChild(n),e.appendChild(a)}(n,e),function(e,t,n,i,a){e.setAttribute("href",a.url),e.setAttribute("class","article"),e.appendChild(n),e.appendChild(i),e.appendChild(t)}(a,n,s,o,e),t.appendChild(a)})}(a),function(){const e=document.getElementsByClassName("image"),t=document.getElementsByClassName("loader");for(let n=0;n<e.length;n++)e[n].addEventListener("load",(function(){e[n].classList.toggle("animated"),t[n].classList.toggle("animated")}))}()):t("No article to dispay. Please select another topic.")})).fail((function(){t("Sorry something went wrong")}))}))}));